{% extends 'bts_for_fun/layout.html' %}
{% block body %}
<br>
<br>
<center>
<p1>Tourist Attraction : {{ tourist.id }}</p1><br>
<br>
<p1>Tourist Attraction : {{ tourist.thai_name_tourist }} {{ tourist.eng_name_tourist }} </p1>
<br>
<img src={{tourist.tourist_pic}}  width="700" height="400">
<br>
<p1>------------------------------------------</p1><br>
</center>
<p2 align="left">{{ tourist.tourist_detai|linebreaksbr }}</p2><br>

<a href="{% url 'post:post-list' %}" >
    <p1>Community BTS For Fun</p1><br>
</a>

<body>
    <style>
        .rating-list li {
          float: right;
          color: #ddd;
          padding: 10px 5px;
        }

        .rating-list li:hover,
        .rating-list li:hover ~ li {
          color: orange;
        }

        .rating-list {
          display: inline-block;
          list-style: none;
        }
        .checked {
            color: orange;
        }
    </style>
    
    <div class="container" style="padding: 2em">
        {% for tourist in tourists %}
        <div class="card" style="width: 30rem;">

          <div class="card-body">
            <h5 class="card-title">Avg rating:
                <span class="fa fa-star {% if tourist.average_rating > 0 %} checked {% endif %}"></span>
                <span class="fa fa-star {% if tourist.average_rating > 1 %} checked {% endif %}"></span>
                <span class="fa fa-star {% if tourist.average_rating > 2 %} checked {% endif %}"></span>
                <span class="fa fa-star {% if tourist.average_rating > 3 %} checked {% endif %}" ></span>
                <span class="fa fa-star {% if tourist.average_rating > 4 %} checked {% endif %}"></span>
            </h5>
            <ul class="btn btn-light list-inline rating-list">
              <li onclick="rate(5, {{ tourist.id }})">
                  <i class="fa fa-star {% if tourist.user_rating > 3 %} checked {% endif %}" title="Rate 5"></i></li>
              <li onclick="rate(4, {{ tourist.id }})">
                  <i class="fa fa-star {% if tourist.user_rating > 3 %} checked {% endif %}" title="Rate 4"></i></li>
              <li onclick="rate(3, {{ tourist.id }})">
                  <i class="fa fa-star {% if tourist.user_rating > 2 %} checked {% endif %}" title="Rate 3"></i></li>
              <li onclick="rate(2, {{ tourist.id }})">
                  <i class="fa fa-star {% if tourist.user_rating > 1 %} checked {% endif %}" title="Rate 2"></i></li>
              <li onclick="rate(1, {{ tourist.id }})">
                  <i class="fa fa-star {% if tourist.user_rating > 0 %} checked {% endif %}" title="Rate 1"></i></li>
            </ul>
          </div>
        </div>
    {% endfor %}
    </div>
    <script>
        const rate = (rating, tourist_id) => {
            fetch(`/bts_for_fun/rate/${tourist_id}/${rating}/`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            }).then(rest => {
                window.location.reload();

            })
        }
    </script>
</body>
{% endblock %}